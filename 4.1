fun main() = println(
    readlnOrNull()
        ?.takeIf { it.all { char -> char.isDigit() } }
        ?.map { it.digitToInt() }
        ?.filter { it % 3 == 0 }
        ?.let { if (it.isEmpty()) 1 else it.fold(1) { product, d -> product * d } }
        ?: "Ошибка ввода"
)
